<!--
  Este componente representa la vista de perfil de usuario en la aplicaci√≥n.
  El usuario puede cambiar su informacion y preferencias
-->
<div class="page-header">
  <h2>My Profile</h2>
</div>

<div class="profile-container">
  <div class="banner">
    <img class="cover" [src]="user?.banner" alt="Banner" aria-label="Banner image">
    <div class="profile-icon-wrapper">
      <img class="profile-icon" [src]="user?.pfp" alt="Icono" aria-label="Profile picture image">
    </div>
    <div class="description-box">
      <strong>Descripci√≥n:</strong>
      <div *ngIf="!editMode">
        <p>{{ user?.description }}</p>
      </div>
      <div *ngIf="editMode">
        <textarea [(ngModel)]="editedUser.description" aria-label="Banner image"></textarea>
      </div>
    </div>
  </div>

  <div class="profile-content">
    <div class="personal-info">
      <h3>Informaci√≥n Personal</h3>

      <mat-divider></mat-divider>

      <h4>Nombre de Usuario:
        <span *ngIf="!editMode">{{ user?.username }}</span>
        <input *ngIf="editMode" [(ngModel)]="editedUser.username">
      </h4>

      <h4>Correo electr√≥nico:
        <span *ngIf="!editMode">{{ user?.email }}</span>
        <input *ngIf="editMode" [(ngModel)]="editedUser.email">
      </h4>

      <h4>Contrase√±a:
        <span *ngIf="!editMode">**********</span>
        <input *ngIf="editMode" type="password" [(ngModel)]="editedUser.password">
      </h4>

      <h4>N√∫mero de tel√©fono:
        <span *ngIf="!editMode">{{ user?.phone }}</span>
        <input matInput *ngIf="editMode" [(ngModel)]="editedUser.phone">
      </h4>

      <h4>Plan:
        <span *ngIf="!editMode">{{ user?.plan }}</span>
        <select *ngIf="editMode" [(ngModel)]="editedUser.plan">
          <option value="Gratis">Gratis</option>
          <option value="Premium">Premium</option>
        </select>
      </h4>

    </div>
    <div class="config-info">
      <h3>Configuration</h3>

      <mat-divider></mat-divider>

      <h4>Idioma:
        <span *ngIf="!editMode">{{ user?.language }}</span>
        <select *ngIf="editMode" [(ngModel)]="editedUser.language" aria-label="Langueage switcher">
          <option value="Espa√±ol">Espa√±ol</option>
          <option value="English">English</option>
        </select>
      </h4>

      <h4>Notificaciones:
        <span *ngIf="!editMode">{{ user?.notifications }}</span>
        <select *ngIf="editMode" [(ngModel)]="editedUser.notifications" aria-label="Notifications preferences">
          <option value="All">All</option>
          <option value="Silenced">Silenced</option>
          <option value="Mentions">Mentions</option>
        </select>
      </h4>

      <h4>Zona horaria:
        <span *ngIf="!editMode">{{ user?.timezone }}</span>
        <select *ngIf="editMode" [(ngModel)]="editedUser.timezone" aria-label="Timezone">
          <option value="GMT-5">GMT-5</option>
          <option value="GMT-4">GMT-4</option>
          <option value="GMT-3">GMT-3</option>
        </select>
      </h4>

      <h4>Aprobaci√≥n de inscripciones:
        <span *ngIf="!editMode">{{ user?.inscriptions }}</span>
        <select *ngIf="editMode" [(ngModel)]="editedUser.inscriptions" aria-label="Inscriptions approvals">
          <option value="Manual">Manual</option>
          <option value="Automatic">Autom√°tica</option>
        </select>
      </h4>
    </div>
  </div>

  <div class="button-group">
    <button *ngIf="!editMode" class="edit-btn" (click)="toggleEdit()" aria-label="Edit profile settings">‚úèÔ∏è Editar detalles</button>
    <div *ngIf="editMode">
      <button class="edit-btn" (click)="saveChanges()" aria-label="Save changes">üíæ Guardar</button>
      <button class="logout-btn" (click)="cancelEdit()" aria-label="Cancel changes">‚ùå Cancelar</button>
    </div>
    <button class="logout-btn" (click)="logout()" aria-label="Log out">‚õî Cerrar Sesi√≥n</button>
  </div>
</div>

